# requisites
Пакет для генерации и валидации тестовых ОГРН

Подключаем
```javascript
const generatorFactory = require( 'generator' );
```

Конфигурируем
```javascript
const generator = generatorFactory( null, {
	initVals: [ "1", "5" ]
} );
```

Генерируем
```javascript
const ogrn = generator.generate();
```

Валидируем
```javascript
const validation = generator.validate( ogrn );
const valid = Object.keys( validation ).reduce( ( valid, key ) => {
    return valid && validation[ key ];
}, true );

console.log( `ogrn is valid: ${ valid }` );
```

## конфигурация
### generatorFacory( [ defaultConfigOptions [, config ]] )
generatorFactory принимает два необязательных параметра

#### defaultConfigOptions
Объект, свойства которого используются для конфигурации дефолтного config. Если не используются дефолтный config, не используются defaultConfigOptions.

```javascript
{
	yearsLength : 20,
	codesCount  : 20,
	numbersCount: 20
}
```

###### yearsLength
По умолчанию - 20. Число последних лет, для которых генерируется ОГРН. Например, если текущий год - 2017, и `defaultConfigOptions.yearsLength == 3`, то ОГРН будет генерироваться для 2017, 2016, 2015 годов - `[ "17", "16", "15" ]`. Таким образом, это настройка для дефолтного `config.years`. [Подробнее о config.years](#years)

###### codesCount
По умолчанию - 20
Число случайно сгенерированных кодов налоговых инспекций, из которых будет случайно выбираться код при генерации ОГРН, а также при валидации ОГРН код будет проверяться на вхождение в этот список.
Например, если `codesCount = 3`, то сгенерируется 3 кода налоговых испекций. Например `[ "12", "34", "56" ]`. При генерации ОГРН 6-й и 7-й знак вместе будут соответсвовать одному из трех кодов. При валидации поле `code` валидациооного объекта получит значение `true`, только если 6-й и 7-й знак вместе будут соответсвовать одному из трех кодов.

###### numbersCount
По умолчанию - 20.
Число случайно сгенерированных номеров записей ОГРН, из которых будет случайно выбираться номер записи при генерации ОГРН, а также при валидации ОГРН номер записи будет проверяться на вхождение в этот список.
Например, если `numbersCount = 3`, то сгенерируется 3 номера записи ОГРН. Например `[ "12345", "67890", "48162" ]`. При генерации ОГРН с 8-го по 12-й знак вместе будут соответсвовать одному из номеров записей. При валидации поле `number` валидациооного объекта получит значение `true`, только если c 8-го по 12-й знаки вместе будут соответсвовать одному из трех номеров записей.

#### config
Объект, свойства которого содержат исходные данных из которых генерируется ОГРН, и которые используются для валидации ОГРН.

```javascript
{
	initVals: ...,
	years: ...,
	subjects: ...,
	codes: ...,
	numbers: ...	
}
```

###### initVals
Набор первых знаков.
Массив строк из одной цифры.

По умолчанию - массив `[ "1", "5" ]`.

При генерации строки ОГРН 1-й знак будет соответсвовать одному из значений массива. При валидации поле `year` валидационного объекта получит значение `true`, только если 1-й будет соответствовать одному из значений массива.

###### years
Набор годов внесения ОГРН в реестр. Массив строк из двух цифр.

По умолчанию - массив строк из двух цифр, длина которого `defaultConfigOptions.yearsLength`. Строки соответствуют последним годам - текущему и предшествующим. Например, если текущий год - 2017, и ` defaultConfigOptions.yearsLength == 3`, то по умолчанию `config.years = [ "17", "16", "15" ]`. [Подробнее о defaultConfigOptions.yearsLength](#yearsLength)

При генерации строки ОГРН 2-й и 3-й знаки вместе будут соответсвовать одному из значений массива годов внесени ОГРН в реестр. При валидации поле `year` валидационного объекта получит значение `true`, только если 2-й и 3-й знаки вместе будут соответствовать одному из значений массива годов внесения ОГРН в реестр.

###### subjects
Набор номеров субъектов РФ.
Массив строк из двух цифр.

По умолчанию - массив из файла src/lib/subjects.json

При генерации строки ОГРН 4-й и 5-й знаки вместе будут соответствовать одному из значений массива. При валидации поле `subject` валидационного объекта получит значение `true`, только если 4-й и 5-й знаки будут соответствовать одному из значений массива.

###### codes
Набор кодов налоговых инспекций.
Либо массив строк из двух цифр. Либо объект, группирующий массивы строк из двух цифр по объектам РФ.

По умолчанию - массив случайно сгенерированных строк из двух строк, длина которого `defaultConfigOptions.codesCount`.
Например, если `defaultConfigOptionsюcodesCount = 3`, то сгенерируется массив из трех строк. Например `[ "12", "34", "56" ]`.

При генерации ОГРН 6-й и 7-й знак вместе будут соответсвовать одному из значений массива (или массива, соответствующего субъекту РФ). При валидации поле `code` валидациооного объекта получит значение `true`, только если 6-й и 7-й знак вместе будут соответсвовать одному из значений массива (или массива, соответствующего субъекту РФ).

###### numbers
Набор номеров записей ОГРН.
Массив строк из 5 цифр.

По умолчанию - массив строк их 5 цифр, длина которого равна `defaultConfigOptions.numbersCount`.
Например, если `defaultConfigOptions.numbersCount = 3`, то сгенерируется 3 номера записи ОГРН. Например `[ "12345", "67890", "48162" ]`.

При генерации ОГРН с 8-го по 12-й знак вместе будут соответсвовать одному из элементов массива номеров записей. При валидации поле `number` валидациооного объекта получит значение `true`, только если c 8-го по 12-й знаки вместе будут соответсвовать одному из эдементов массива номеров записей.
